"use strict";(self.webpackChunkrke_docs=self.webpackChunkrke_docs||[]).push([[7159],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=s(n),f=i,d=m["".concat(c,".").concat(f)]||m[f]||p[f]||o;return n?r.createElement(d,a(a({ref:t},u),{},{components:n})):r.createElement(d,a({ref:t},u))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var s=2;s<o;s++)a[s]=n[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6976:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return f},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return p}});var r=n(7462),i=n(3366),o=(n(7294),n(3905)),a=["components"],l={title:"Rate Limiting",weight:241},c=void 0,s={unversionedId:"config-options/rate-limiting/rate-limiting",id:"config-options/rate-limiting/rate-limiting",title:"Rate Limiting",description:"Using the EventRateLimit admission control enforces a limit on the number of events that the API Server will accept in a given time period. In a large multi-tenant cluster, there might be a small percentage of tenants that flood the server with event requests, which could have a significant impact on the performance of the cluster overall. Therefore, it is recommended to limit the rate of events that the API server will accept.",source:"@site/docs/config-options/rate-limiting/rate-limiting.md",sourceDirName:"config-options/rate-limiting",slug:"/config-options/rate-limiting/",permalink:"/config-options/rate-limiting/",draft:!1,editUrl:"https://github.com/kubewarden/docs/edit/main/docs/config-options/rate-limiting/rate-limiting.md",tags:[],version:"current",lastUpdatedAt:1660918540,formattedLastUpdatedAt:"8/19/2022",frontMatter:{title:"Rate Limiting",weight:241},sidebar:"mySidebar",previous:{title:"Authorization",permalink:"/config-options/authorization/"},next:{title:"AWS Cloud Provider",permalink:"/config-options/cloud-providers/aws/"}},u={},p=[{value:"Example Configurations",id:"example-configurations",level:3}],m={toc:p};function f(e){var t=e.components,n=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Using the ",(0,o.kt)("inlineCode",{parentName:"p"},"EventRateLimit")," admission control enforces a limit on the number of events that the API Server will accept in a given time period. In a large multi-tenant cluster, there might be a small percentage of tenants that flood the server with event requests, which could have a significant impact on the performance of the cluster overall. Therefore, it is recommended to limit the rate of events that the API server will accept."),(0,o.kt)("p",null,"You might want to configure event rate limit as part of compliance with the CIS (Center for Internet Security) Kubernetes Benchmark. Event rate limiting corresponds to the CIS Kubernetes Benchmark 1.1.36 - Ensure that the admission control plugin ",(0,o.kt)("inlineCode",{parentName:"p"},"EventRateLimit")," is set (Scored)."),(0,o.kt)("p",null,"Rate limits can be configured for the server, a namespace, a user, or a combination of a source and an object."),(0,o.kt)("p",null,"For configuration details, refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#eventratelimit"},"official Kubernetes documentation.")),(0,o.kt)("h3",{id:"example-configurations"},"Example Configurations"),(0,o.kt)("p",null,"The following configuration in the ",(0,o.kt)("inlineCode",{parentName:"p"},"cluster.yml")," can be used to enable the event rate limit by default:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"services:\n  kube-api:\n    event_rate_limit:\n      enabled: true\n")),(0,o.kt)("p",null,"When the event rate limit is enabled, you should be able to see the default values at ",(0,o.kt)("inlineCode",{parentName:"p"},"/etc/kubernetes/admission.yaml"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"...\nplugins:\n- configuration:\n    apiVersion: eventratelimit.admission.k8s.io/v1alpha1\n    kind: Configuration\n    limits:\n    - burst: 20000\n      qps: 5000\n      type: Server\n...\n")),(0,o.kt)("p",null,"To customize the event rate limit, the entire Kubernetes resource for the configuration must be provided in the ",(0,o.kt)("inlineCode",{parentName:"p"},"configuration")," directive:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"services:\n  kube-api:\n    event_rate_limit:\n      enabled: true\n      configuration:\n        apiVersion: eventratelimit.admission.k8s.io/v1alpha1\n        kind: Configuration\n        limits:\n        - type: Server\n          qps: 6000\n          burst: 30000\n")))}f.isMDXComponent=!0}}]);