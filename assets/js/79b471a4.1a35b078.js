"use strict";(self.webpackChunkrke_docs=self.webpackChunkrke_docs||[]).push([[5628],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=c(r),m=a,v=u["".concat(l,".").concat(m)]||u[m]||d[m]||i;return r?n.createElement(v,s(s({ref:t},p),{},{components:r})):n.createElement(v,s({ref:t},p))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,s=new Array(i);s[0]=u;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var c=2;c<i;c++)s[c]=r[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},3541:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var n=r(7462),a=(r(7294),r(3905));const i={title:"Extra Args, Extra Binds, and Extra Environment Variables",weight:231},s=void 0,o={unversionedId:"config-options/services/services-extras/services-extras",id:"config-options/services/services-extras/services-extras",title:"Extra Args, Extra Binds, and Extra Environment Variables",description:"RKE supports additional service arguments, volume binds and environment variables.",source:"@site/docs/config-options/services/services-extras/services-extras.md",sourceDirName:"config-options/services/services-extras",slug:"/config-options/services/services-extras/",permalink:"/config-options/services/services-extras/",draft:!1,editUrl:"https://github.com/rancher/rke1-docs/edit/main/docs/config-options/services/services-extras/services-extras.md",tags:[],version:"current",lastUpdatedAt:1674774141,formattedLastUpdatedAt:"1/26/2023",frontMatter:{title:"Extra Args, Extra Binds, and Extra Environment Variables",weight:231},sidebar:"mySidebar",previous:{title:"External etcd",permalink:"/config-options/services/external-etcd/"},next:{title:"Default Kubernetes Services",permalink:"/config-options/services/"}},l={},c=[{value:"Extra Args",id:"extra-args",level:3},{value:"Extra Binds",id:"extra-binds",level:3},{value:"Extra Environment Variables",id:"extra-environment-variables",level:3}],p={toc:c};function d(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"RKE supports additional service arguments, volume binds and environment variables."),(0,a.kt)("h3",{id:"extra-args"},"Extra Args"),(0,a.kt)("p",null,"For any of the Kubernetes services, you can update the ",(0,a.kt)("inlineCode",{parentName:"p"},"extra_args")," to change the existing defaults."),(0,a.kt)("p",null,"As of ",(0,a.kt)("inlineCode",{parentName:"p"},"v0.1.3"),", using ",(0,a.kt)("inlineCode",{parentName:"p"},"extra_args")," will add new arguments and ",(0,a.kt)("strong",{parentName:"p"},"override")," any existing defaults. For example, if you need to modify the default admission plugins list, you need to include the default list and edit it with your changes so all changes are included."),(0,a.kt)("p",null,"Before ",(0,a.kt)("inlineCode",{parentName:"p"},"v0.1.3"),", using ",(0,a.kt)("inlineCode",{parentName:"p"},"extra_args")," would only add new arguments to the list and there was no ability to change the default list."),(0,a.kt)("p",null,"All service defaults and parameters are defined per ",(0,a.kt)("a",{parentName:"p",href:"config-options/#kubernetes-version"},(0,a.kt)("inlineCode",{parentName:"a"},"kubernetes_version")),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"For RKE v0.3.0+, the service defaults and parameters are defined per ",(0,a.kt)("a",{parentName:"p",href:"config-options/#kubernetes-version"},(0,a.kt)("inlineCode",{parentName:"a"},"kubernetes_version")),". The service defaults are located ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/rancher/kontainer-driver-metadata/blob/master/rke/k8s_service_options.go"},"here"),". The default list of admissions plugins is the same for all Kubernetes versions and is located ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/rancher/kontainer-driver-metadata/blob/master/rke/k8s_service_options.go#L11"},"here"),".")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"For RKE before v0.3.0, the service defaults and admission plugins are defined per ",(0,a.kt)("a",{parentName:"p",href:"config-options/#kubernetes-version"},(0,a.kt)("inlineCode",{parentName:"a"},"kubernetes_version"))," and located ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/rancher/types/blob/release/v2.2/apis/management.cattle.io/v3/k8s_defaults.go"},"here"),". "))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'services:\n    kube-controller:\n      extra_args:\n        cluster-name: "mycluster"\n')),(0,a.kt)("h3",{id:"extra-binds"},"Extra Binds"),(0,a.kt)("p",null,"Additional volume binds can be added to services using the ",(0,a.kt)("inlineCode",{parentName:"p"},"extra_binds")," arguments."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'services:\n    kubelet:\n      extra_binds:\n        - "/dev:/host/dev"\n        - "/usr/libexec/kubernetes/kubelet-plugins:/usr/libexec/kubernetes/kubelet-plugins:z"\n')),(0,a.kt)("h3",{id:"extra-environment-variables"},"Extra Environment Variables"),(0,a.kt)("p",null,"Additional environment variables can be added to services by using the ",(0,a.kt)("inlineCode",{parentName:"p"},"extra_env")," arguments."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'services:\n    kubelet:\n      extra_env:\n        - "HTTP_PROXY=http://your_proxy"\n')))}d.isMDXComponent=!0}}]);