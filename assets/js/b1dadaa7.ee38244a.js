"use strict";(self.webpackChunkrke_docs=self.webpackChunkrke_docs||[]).push([[9664],{3905:(e,n,r)=>{r.d(n,{Zo:()=>p,kt:()=>u});var t=r(7294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function s(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function o(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?s(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function i(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=t.createContext({}),l=function(e){var n=t.useContext(c),r=n;return e&&(r="function"==typeof e?e(n):o(o({},n),e)),r},p=function(e){var n=l(e.components);return t.createElement(c.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,s=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=l(r),u=a,g=d["".concat(c,".").concat(u)]||d[u]||m[u]||s;return r?t.createElement(g,o(o({ref:n},p),{},{components:r})):t.createElement(g,o({ref:n},p))}));function u(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=r.length,o=new Array(s);o[0]=d;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var l=2;l<s;l++)o[l]=r[l];return t.createElement.apply(null,o)}return t.createElement.apply(null,r)}d.displayName="MDXCreateElement"},4027:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var t=r(7462),a=(r(7294),r(3905));const s={title:"System Images",weight:225},o=void 0,i={unversionedId:"config-options/system-images/system-images",id:"config-options/system-images/system-images",title:"System Images",description:"When RKE is deploying Kubernetes, there are several images that are pulled. These images are used as Kubernetes system components as well as helping to deploy these system components.",source:"@site/docs/config-options/system-images/system-images.md",sourceDirName:"config-options/system-images",slug:"/config-options/system-images/",permalink:"/rke1-docs/config-options/system-images/",draft:!1,editUrl:"https://github.com/rancher/rke1-docs/edit/main/docs/config-options/system-images/system-images.md",tags:[],version:"current",lastUpdatedAt:1674773403,formattedLastUpdatedAt:"1/26/2023",frontMatter:{title:"System Images",weight:225},sidebar:"mySidebar",previous:{title:"Bastion/Jump Host Configuration",permalink:"/rke1-docs/config-options/bastion-host/"},next:{title:"External etcd",permalink:"/rke1-docs/config-options/services/external-etcd/"}},c={},l=[{value:"Air-gapped Setups",id:"air-gapped-setups",level:3}],p={toc:l};function m(e){let{components:n,...r}=e;return(0,a.kt)("wrapper",(0,t.Z)({},p,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"When RKE is deploying Kubernetes, there are several images that are pulled. These images are used as Kubernetes system components as well as helping to deploy these system components.  "),(0,a.kt)("p",null,"As of ",(0,a.kt)("inlineCode",{parentName:"p"},"v0.1.6"),", the functionality of a couple of the system images were consolidated into a single ",(0,a.kt)("inlineCode",{parentName:"p"},"rancher/rke-tools")," image to simplify and speed the deployment process."),(0,a.kt)("p",null,"You can configure the ",(0,a.kt)("a",{parentName:"p",href:"config-options/add-ons/network-plugins/"},"network plug-ins"),", ",(0,a.kt)("a",{parentName:"p",href:"config-options/add-ons/ingress-controllers/"},"ingress controller")," and ",(0,a.kt)("a",{parentName:"p",href:"config-options/add-ons/dns/"},"dns provider")," as well as the options for these add-ons separately in the ",(0,a.kt)("inlineCode",{parentName:"p"},"cluster.yml"),"."),(0,a.kt)("p",null,"Below is an example of the list of system images used to deploy Kubernetes through RKE. The default versions of Kubernetes are tied to specific versions of system images. "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"For RKE v0.2.x and below, the map of versions and the system image versions is located here: ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/rancher/types/blob/release/v2.2/apis/management.cattle.io/v3/k8s_defaults.go"},"https://github.com/rancher/types/blob/release/v2.2/apis/management.cattle.io/v3/k8s_defaults.go"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"For RKE v0.3.0 and above, the map of versions and the system image versions is located here: ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/rancher/kontainer-driver-metadata/blob/release-v2.7/rke/k8s_rke_system_images.go"},"https://github.com/rancher/kontainer-driver-metadata/blob/release-v2.7/rke/k8s_rke_system_images.go")))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Note:")," As versions of RKE are released, the tags on these images will no longer be up to date. This list is specific for ",(0,a.kt)("inlineCode",{parentName:"p"},"v1.10.3-rancher2"),".")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'system_images:\n  etcd: rancher/coreos-etcd:v3.2.24\n  alpine: rancher/rke-tools:v0.1.24\n  nginx_proxy: rancher/rke-tools:v0.1.24\n  cert_downloader: rancher/rke-tools:v0.1.24\n  kubernetes: rancher/hyperkube:v1.13.1-rancher1\n  kubernetes_services_sidecar: rancher/rke-tools:v0.1.24\n  pod_infra_container: rancher/pause-amd64:3.1\n\n  # kube-dns images\n  kubedns: rancher/k8s-dns-kube-dns-amd64:1.15.0\n  dnsmasq: rancher/k8s-dns-dnsmasq-nanny-amd64:1.15.0\n  kubedns_sidecar: rancher/k8s-dns-sidecar-amd64:1.15.0\n  kubedns_autoscaler: rancher/cluster-proportional-autoscaler-amd64:1.0.0\n\n  # CoreDNS images\n  coredns: coredns/coredns:1.2.6\n  coredns_autoscaler: rancher/cluster-proportional-autoscaler-amd64:1.0.0\n\n  # Flannel images\n  flannel: rancher/coreos-flannel:v0.10.0\n  flannel_cni: rancher/coreos-flannel-cni:v0.3.0\n\n  # Calico images\n  calico_node: rancher/calico-node:v3.4.0\n  calico_cni: rancher/calico-cni:v3.4.0\n  calico_controllers: ""\n  calico_ctl: rancher/calico-ctl:v2.0.0\n\n  # Canal images\n  canal_node: rancher/calico-node:v3.4.0\n  canal_cni: rancher/calico-cni:v3.4.0\n  canal_flannel: rancher/coreos-flannel:v0.10.0\n\n  # Weave images\n  weave_node: weaveworks/weave-kube:2.5.0\n  weave_cni: weaveworks/weave-npc:2.5.0\n\n  # Ingress controller images\n  ingress: rancher/nginx-ingress-controller:0.21.0-rancher1\n  ingress_backend: rancher/nginx-ingress-controller-defaultbackend:1.4\n\n  # Metrics server image\n  metrics_server: rancher/metrics-server-amd64:v0.3.1\n')),(0,a.kt)("p",null,"Before ",(0,a.kt)("inlineCode",{parentName:"p"},"v0.1.6"),", instead of using the ",(0,a.kt)("inlineCode",{parentName:"p"},"rancher/rke-tools")," image, we used the following images:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"system_images:\n    alpine: alpine:latest\n    nginx_proxy: rancher/rke-nginx-proxy:v0.1.1\n    cert_downloader: rancher/rke-cert-deployer:v0.1.1\n    kubernetes_services_sidecar: rancher/rke-service-sidekick:v0.1.0\n")),(0,a.kt)("h3",{id:"air-gapped-setups"},"Air-gapped Setups"),(0,a.kt)("p",null,"If you have an air-gapped setup and cannot access ",(0,a.kt)("inlineCode",{parentName:"p"},"docker.io"),", you will need to set up your ",(0,a.kt)("a",{parentName:"p",href:"config-options/private-registries/"},"private registry")," in your cluster configuration file. After you set up private registry, you will need to update these images to pull from your private registry."))}m.isMDXComponent=!0}}]);