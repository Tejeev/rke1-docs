<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-config-options/nodes/nodes">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<title data-rh="true">Nodes | RKE1</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://http://rke.docs.rancher.com//config-options/nodes"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Nodes | RKE1"><meta data-rh="true" name="description" content="The nodes directive is the only required section in the cluster.yml file. It&#x27;s used by RKE to specify cluster node(s), ssh credentials used to access the node(s) and which roles these nodes will be in the Kubernetes cluster."><meta data-rh="true" property="og:description" content="The nodes directive is the only required section in the cluster.yml file. It&#x27;s used by RKE to specify cluster node(s), ssh credentials used to access the node(s) and which roles these nodes will be in the Kubernetes cluster."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="http://http://rke.docs.rancher.com//config-options/nodes"><link data-rh="true" rel="alternate" href="http://http://rke.docs.rancher.com//config-options/nodes" hreflang="en"><link data-rh="true" rel="alternate" href="http://http://rke.docs.rancher.com//config-options/nodes" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.52ec3bf5.css">
<link rel="preload" href="/assets/js/runtime~main.15f9ec57.js" as="script">
<link rel="preload" href="/assets/js/main.6fc4084f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-horizontal-rke.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-horizontal-rke.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/">Docs</a><a href="https://github.com/rancher/rke1-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Overview of RKE</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/installation">RKE Kubernetes Installation</a><button aria-label="Toggle the collapsible sidebar category &#x27;RKE Kubernetes Installation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/upgrades">Upgrades</a><button aria-label="Toggle the collapsible sidebar category &#x27;Upgrades&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kubeconfig">Kubeconfig File</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/etcd-snapshots">Backups and Disaster Recovery</a><button aria-label="Toggle the collapsible sidebar category &#x27;Backups and Disaster Recovery&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cert-mgmt">Certificate Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/managing-clusters">Adding and Removing Nodes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/config-options">Kubernetes Configuration Options</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes Configuration Options&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/config-options/nodes">Nodes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/private-registries">Private Registries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/bastion-host">Bastion/Jump Host Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/system-images">System Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/services/external-etcd">External etcd</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/services/services-extras">Extra Args, Extra Binds, and Extra Environment Variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/services">Default Kubernetes Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/secrets-encryption">Encrypting Secret Data at Rest</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/authorization">Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/rate-limiting">Rate Limiting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/cloud-providers/aws">AWS Cloud Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/cloud-providers/azure">Azure Cloud Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/cloud-providers">Cloud Providers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/cloud-providers/custom">Custom Cloud Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/cloud-providers/openstack">OpenStack Cloud Provider</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/config-options/cloud-providers/vsphere">vSphere Cloud Provider</a><button aria-label="Toggle the collapsible sidebar category &#x27;vSphere Cloud Provider&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/audit-log">Audit Log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/config-options/dual-stack">Dual-stack</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/example-yamls">Example Cluster.ymls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/config-options"><span itemprop="name">Kubernetes Configuration Options</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Nodes</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Nodes</h1></header><p>The <code>nodes</code> directive is the only required section in the <code>cluster.yml</code> file. It&#x27;s used by RKE to specify cluster node(s), ssh credentials used to access the node(s) and which roles these nodes will be in the Kubernetes cluster.</p><p>This section covers the following topics:</p><ul><li><a href="#node-configuration-example">Node configuration example</a></li><li><a href="#kubernetes-roles">Kubernetes roles</a><ul><li><a href="#etcd">etcd</a></li><li><a href="#controlplane">Controlplane</a></li><li><a href="#worker">Worker</a></li></ul></li><li><a href="#node-options">Node options</a><ul><li><a href="#address">Address</a></li><li><a href="#internal-address">Internal address</a></li><li><a href="#overriding-the-hostname">Overriding the hostname</a></li><li><a href="#ssh-port">SSH port</a></li><li><a href="#ssh-users">SSH users</a></li><li><a href="#ssh-key-path">SSH key path</a></li><li><a href="#ssh-key">SSH key</a></li><li><a href="#ssh-certificate-path">SSH certificate path</a></li><li><a href="#ssh-certificate">SSH certificate</a></li><li><a href="#docker-socket">Docker socket</a></li><li><a href="#labels">Labels</a></li><li><a href="#taints">Taints</a></li></ul></li></ul><h1>Node Configuration Example</h1><p>The following example shows node configuration in an example <code>cluster.yml</code>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">nodes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 1.1.1.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ubuntu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> controlplane</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> etcd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">ssh_key_path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /home/user/.ssh/id_rsa</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2222</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 2.2.2.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ubuntu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">ssh_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">BEGIN RSA PRIVATE KEY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">END RSA PRIVATE KEY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 3.3.3.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ubuntu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">ssh_key_path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /home/user/.ssh/id_rsa</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">ssh_cert_path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /home/user/.ssh/id_rsa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">cert.pub</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 4.4.4.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ubuntu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">ssh_key_path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /home/user/.ssh/id_rsa</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">ssh_cert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ssh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">rsa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">cert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">v01@openssh.com AAAAHHNza</span><span class="token punctuation" style="color:rgb(199, 146, 234)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">taints</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Available as of v0.3.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">key</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">effect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> NoSchedule</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ubuntu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">hostname_override</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> node3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">internal_address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 192.168.1.6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ingress</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Kubernetes Roles</h1><p>You can specify the list of roles that you want the node to be as part of the Kubernetes cluster. Three roles are supported: <code>controlplane</code>, <code>etcd</code> and <code>worker</code>. Node roles are not mutually exclusive. It&#x27;s possible to assign any combination of roles to any node. It&#x27;s also possible to change a node&#x27;s role using the upgrade process.</p><blockquote><p><strong>Note:</strong> Before v0.1.8, workloads/pods might have run on any nodes with <code>worker</code> or <code>controlplane</code> roles, but as of v0.1.8, they will only be deployed to any <code>worker</code> nodes.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="etcd">etcd<a class="hash-link" href="#etcd" title="Direct link to heading">​</a></h3><p>With this role, the <code>etcd</code> container will be run on these nodes.  Etcd keeps the state of your cluster and is the most important component in your cluster, single source of truth of your cluster. Although you can run etcd on just one node, it typically takes 3, 5 or more nodes to create an HA configuration. Etcd is a distributed reliable key-value store which stores all Kubernetes state. <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/" target="_blank" rel="noopener noreferrer">Taint set on nodes</a> with the <strong>etcd</strong> role is shown below:</p><table><thead><tr><th>Taint Key</th><th>Taint Value</th><th>Taint Effect</th></tr></thead><tbody><tr><td><code>node-role.kubernetes.io/etcd</code></td><td><code>true</code></td><td><code>NoExecute</code></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="controlplane">Controlplane<a class="hash-link" href="#controlplane" title="Direct link to heading">​</a></h3><p>With this role, the stateless components that are used to deploy Kubernetes will run on these nodes. These components are used to run the API server, scheduler, and controllers. <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/" target="_blank" rel="noopener noreferrer">Taint set on nodes</a> with the <strong>controlplane</strong> role is shown below:</p><table><thead><tr><th>Taint Key</th><th>Taint Value</th><th>Taint Effect</th></tr></thead><tbody><tr><td><code>node-role.kubernetes.io/controlplane</code></td><td><code>true</code></td><td><code>NoSchedule</code></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker">Worker<a class="hash-link" href="#worker" title="Direct link to heading">​</a></h3><p>With this role, any workloads or pods that are deployed will land on these nodes.</p><h1>Node Options</h1><p>Within each node, there are multiple directives that can be used.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="address">Address<a class="hash-link" href="#address" title="Direct link to heading">​</a></h3><p>The <code>address</code> directive will be used to set the hostname or IP address of the node. RKE must be able to connect to this address.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="internal-address">Internal Address<a class="hash-link" href="#internal-address" title="Direct link to heading">​</a></h3><p>The <code>internal_address</code> provides the ability to have nodes with multiple addresses set a specific address to use for inter-host communication on a private network. If the <code>internal_address</code> is not set, the <code>address</code> is used for inter-host communication. The <code>internal_address</code> directive will set the address used for inter-host communication of the Kubernetes components, e.g. kube-apiserver and etcd. To change the interface used for the vxlan traffic of the Canal or Flannel network plug-ins please refer to the <a href="/config-options/config-options/add-ons/network-plugins">Network Plug-ins Documentation</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overriding-the-hostname">Overriding the Hostname<a class="hash-link" href="#overriding-the-hostname" title="Direct link to heading">​</a></h3><p>The <code>hostname_override</code> is used to be able to provide a friendly name for RKE to use when registering the node in Kubernetes. This hostname doesn&#x27;t need to be a routable address, but it must be a valid <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names" target="_blank" rel="noopener noreferrer">Kubernetes resource name</a>. If the <code>hostname_override</code> isn&#x27;t set, then the <code>address</code> directive is used when registering the node in Kubernetes.</p><blockquote><p><strong>Note:</strong> When <a href="/config-options/config-options/cloud-providers">cloud providers</a> are configured, you may need to override the hostname in order to use the cloud provider correctly. There is an exception for the <a href="https://kubernetes.io/docs/concepts/cluster-administration/cloud-providers/#aws" target="_blank" rel="noopener noreferrer">AWS cloud provider</a>, where the <code>hostname_override</code> field will be explicitly ignored.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-port">SSH Port<a class="hash-link" href="#ssh-port" title="Direct link to heading">​</a></h3><p>In each node, you specify which <code>port</code> to be used when connecting to this node. The default port is <code>22</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-users">SSH Users<a class="hash-link" href="#ssh-users" title="Direct link to heading">​</a></h3><p>For each node, you specify the <code>user</code> to be used when connecting to this node. This user must be a member of the Docker group or allowed to write to the node&#x27;s Docker socket.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-key-path">SSH Key Path<a class="hash-link" href="#ssh-key-path" title="Direct link to heading">​</a></h3><p>For each node, you specify the path, i.e. <code>ssh_key_path</code>, for the SSH private key to be used when connecting to this node. The default key path for each node is <code>~/.ssh/id_rsa</code>.</p><blockquote><p><strong>Note:</strong> If you have a private key that can be used across all nodes, you can set the <a href="/config-options/config-options#cluster-level-ssh-key-path">SSH key path at the cluster level</a>. The SSH key path set in each node will always take precedence.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-key">SSH Key<a class="hash-link" href="#ssh-key" title="Direct link to heading">​</a></h3><p>Instead of setting the path to the SSH key, you can alternatively specify the actual key, i.e. <code>ssh_key</code>, to be used to connect to the node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-certificate-path">SSH Certificate Path<a class="hash-link" href="#ssh-certificate-path" title="Direct link to heading">​</a></h3><p>For each node, you can specify the path, i.e. <code>ssh_cert_path</code>, for the signed SSH certificate to be used when connecting to this node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-certificate">SSH Certificate<a class="hash-link" href="#ssh-certificate" title="Direct link to heading">​</a></h3><p>Instead of setting the path to the signed SSH certificate, you can alternatively specify the actual certificate, i.e. <code>ssh_cert</code>, to be used to connect to the node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-socket">Docker Socket<a class="hash-link" href="#docker-socket" title="Direct link to heading">​</a></h3><p>If the Docker socket is different than the default, you can set the <code>docker_socket</code>. The default is <code>/var/run/docker.sock</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="labels">Labels<a class="hash-link" href="#labels" title="Direct link to heading">​</a></h3><p>You have the ability to add an arbitrary map of labels for each node. It can be used when using the <a href="/config-options/config-options/add-ons/ingress-controllers">ingress controller&#x27;s</a> <code>node_selector</code> option.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="taints">Taints<a class="hash-link" href="#taints" title="Direct link to heading">​</a></h3><p><em>Available as of v0.3.0</em></p><p>You have the ability to add <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/" target="_blank" rel="noopener noreferrer">taints</a> for each node.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rke1-docs/edit/main/docs/config-options/nodes/nodes.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-01-26T23:02:21.000Z">1/26/2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/config-options"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Kubernetes Configuration Options</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/config-options/private-registries"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Private Registries</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#etcd" class="table-of-contents__link toc-highlight">etcd</a></li><li><a href="#controlplane" class="table-of-contents__link toc-highlight">Controlplane</a></li><li><a href="#worker" class="table-of-contents__link toc-highlight">Worker</a></li><li><a href="#address" class="table-of-contents__link toc-highlight">Address</a></li><li><a href="#internal-address" class="table-of-contents__link toc-highlight">Internal Address</a></li><li><a href="#overriding-the-hostname" class="table-of-contents__link toc-highlight">Overriding the Hostname</a></li><li><a href="#ssh-port" class="table-of-contents__link toc-highlight">SSH Port</a></li><li><a href="#ssh-users" class="table-of-contents__link toc-highlight">SSH Users</a></li><li><a href="#ssh-key-path" class="table-of-contents__link toc-highlight">SSH Key Path</a></li><li><a href="#ssh-key" class="table-of-contents__link toc-highlight">SSH Key</a></li><li><a href="#ssh-certificate-path" class="table-of-contents__link toc-highlight">SSH Certificate Path</a></li><li><a href="#ssh-certificate" class="table-of-contents__link toc-highlight">SSH Certificate</a></li><li><a href="#docker-socket" class="table-of-contents__link toc-highlight">Docker Socket</a></li><li><a href="#labels" class="table-of-contents__link toc-highlight">Labels</a></li><li><a href="#taints" class="table-of-contents__link toc-highlight">Taints</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.15f9ec57.js"></script>
<script src="/assets/js/main.6fc4084f.js"></script>
</body>
</html>