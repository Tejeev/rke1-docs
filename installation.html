<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-installation/installation">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<title data-rh="true">RKE Kubernetes Installation | RKE1</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rke.docs.rancher.com//installation"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="RKE Kubernetes Installation | RKE1"><meta data-rh="true" name="description" content="RKE is a fast, versatile Kubernetes installer you can use to install Kubernetes on your Linux hosts. Learn the simple steps for an RKE Kubernetes installation"><meta data-rh="true" property="og:description" content="RKE is a fast, versatile Kubernetes installer you can use to install Kubernetes on your Linux hosts. Learn the simple steps for an RKE Kubernetes installation"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://rke.docs.rancher.com//installation"><link data-rh="true" rel="alternate" href="https://rke.docs.rancher.com//installation" hreflang="en"><link data-rh="true" rel="alternate" href="https://rke.docs.rancher.com//installation" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.52ec3bf5.css">
<link rel="preload" href="/assets/js/runtime~main.2b1e2a92.js" as="script">
<link rel="preload" href="/assets/js/main.aa2ef175.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-horizontal-rke.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-horizontal-rke.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/">Docs</a><a href="https://github.com/rancher/rke1-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Overview of RKE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/os">Requirements</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" href="/installation">RKE Kubernetes Installation</a><button aria-label="Toggle the collapsible sidebar category &#x27;RKE Kubernetes Installation&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/installation/certs">Custom Certificates</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/upgrades">Upgrades</a><button aria-label="Toggle the collapsible sidebar category &#x27;Upgrades&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kubeconfig">Kubeconfig File</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/etcd-snapshots">Backups and Disaster Recovery</a><button aria-label="Toggle the collapsible sidebar category &#x27;Backups and Disaster Recovery&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cert-mgmt">Certificate Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/managing-clusters">Adding and Removing Nodes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/config-options">Kubernetes Configuration Options</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes Configuration Options&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/example-yamls">Example Cluster.ymls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">RKE Kubernetes Installation</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>RKE Kubernetes Installation</h1></header><p>RKE is a fast, versatile Kubernetes installer that you can use to install Kubernetes on your Linux hosts. You can get started in a couple of quick and easy steps:</p><ol><li><a href="#download-the-rke-binary">Download the RKE Binary</a><ol><li><a href="#alternative-rke-macos-x-install-homebrew">Alternative RKE macOS Install - Homebrew</a></li><li><a href="#alternative-rke-macos-install-macports">Alternative RKE macOS Install - MacPorts</a></li></ol></li><li><a href="#prepare-the-nodes-for-the-kubernetes-cluster">Prepare the Nodes for the Kubernetes Cluster</a></li><li><a href="#creating-the-cluster-configuration-file">Creating the Cluster Configuration File</a></li><li><a href="#deploying-kubernetes-with-rke">Deploying Kubernetes with RKE</a></li><li><a href="#save-your-files">Save your Files</a></li><li><a href="#interacting-with-your-kubernetes-cluster">Interacting with your Kubernetes Cluster</a></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="download-the-rke-binary">Download the RKE binary<a class="hash-link" href="#download-the-rke-binary" title="Direct link to heading">​</a></h2><ol><li><p>From your workstation, open a web browser and look up the <a href="https://github.com/rancher/rke/#latest-release" target="_blank" rel="noopener noreferrer">latest available RKE release</a>. You can click on the release notes link to go straight to that release or manually navigate to our <a href="https://github.com/rancher/rke/releases" target="_blank" rel="noopener noreferrer">RKE Releases</a> page and download the latest available RKE installer applicable to your operating system and architecture:</p><blockquote><p><strong>Note:</strong>
Be aware that the release that is marked as <code>Latest release</code> on GitHub release page might not be the actual latest available release of RKE.</p></blockquote><ul><li><strong>macOS</strong>: <code>rke_darwin-amd64</code></li><li><strong>Linux (Intel/AMD)</strong>: <code>rke_linux-amd64</code></li><li><strong>Linux (ARM 32-bit)</strong>: <code>rke_linux-arm</code></li><li><strong>Linux (ARM 64-bit)</strong>: <code>rke_linux-arm64</code></li><li><strong>Windows (32-bit)</strong>: <code>rke_windows-386.exe</code></li><li><strong>Windows (64-bit)</strong>: <code>rke_windows-amd64.exe</code></li></ul></li><li><p>Copy the RKE binary to a folder in your <code>$PATH</code> and rename it <code>rke</code> (or <code>rke.exe</code> for Windows)</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># macOS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ mv rke_darwin-amd64 rke</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Linux</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ mv rke_linux-amd64 rke</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Windows PowerShell</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; mv rke_windows-amd64.exe rke.exe</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Make the RKE binary that you just downloaded executable. Open Terminal, change directory to the location of the RKE binary, and then run one of the commands below.</p><blockquote><p><strong>Using Windows?</strong>
The file is already an executable. Skip to <a href="#prepare-the-nodes-for-the-kubernetes-cluster">Prepare the Nodes for the Kubernetes Cluster</a>.</p></blockquote><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ chmod +x rke</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Confirm that RKE is now executable by running the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ rke --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-rke-macos-install---homebrew">Alternative RKE macOS Install - Homebrew<a class="hash-link" href="#alternative-rke-macos-install---homebrew" title="Direct link to heading">​</a></h3><p>RKE can also be installed and updated using Homebrew, a package manager for macOS.</p><ol><li><p>Install Homebrew. See <a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">https://brew.sh/</a> for instructions.</p></li><li><p>Using <code>brew</code>, install RKE by running the following command in a Terminal window:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ brew install rke</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><p>If you have already installed RKE using <code>brew</code>, you can upgrade RKE by running:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ brew upgrade rke</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-rke-macos-install---macports">Alternative RKE macOS Install - MacPorts<a class="hash-link" href="#alternative-rke-macos-install---macports" title="Direct link to heading">​</a></h3><p>RKE can also be installed and updated using MacPorts, a package manager for macOS.</p><ol><li><p>Install MacPorts. See <a href="https://www.macports.org/" target="_blank" rel="noopener noreferrer">https://www.macports.org/</a> for instructions.</p></li><li><p>Using <code>port</code>, install RKE by running the following command in a Terminal window:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ port install rke</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><p>If you have already installed RKE using <code>port</code>, you can upgrade RKE by running:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ port upgrade rke</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prepare-the-nodes-for-the-kubernetes-cluster">Prepare the Nodes for the Kubernetes cluster<a class="hash-link" href="#prepare-the-nodes-for-the-kubernetes-cluster" title="Direct link to heading">​</a></h2><p>The Kubernetes cluster components are launched using Docker on a Linux distro. You can use any Linux you want, as long as you can install Docker on it.</p><blockquote><p>For information on which Docker versions were tested with your version of RKE, refer to the <a href="https://rancher.com/support-maintenance-terms" target="_blank" rel="noopener noreferrer">terms of service</a> for installing Rancher on RKE.</p></blockquote><p>Review the <a href="/os">OS requirements</a> and configure each node appropriately.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-cluster-configuration-file">Creating the Cluster Configuration File<a class="hash-link" href="#creating-the-cluster-configuration-file" title="Direct link to heading">​</a></h2><p>RKE uses a cluster configuration file, referred to as <code>cluster.yml</code> to determine what nodes will be in the cluster and how to deploy Kubernetes. There are <a href="/config-options">many configuration options</a> that can be set in the <code>cluster.yml</code>. In our example, we will be assuming the minimum of one <a href="/config-options/nodes">node</a> for your Kubernetes cluster.</p><p>There are two easy ways to create a <code>cluster.yml</code>:</p><ul><li>Using our <a href="/example-yamls#minimal-cluster-yml-example">minimal <code>cluster.yml</code></a> and updating it based on the node that you will be using.</li><li>Using <code>rke config</code> to query for all the information needed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-rke-config">Using <code>rke config</code><a class="hash-link" href="#using-rke-config" title="Direct link to heading">​</a></h3><p>Run <code>rke config</code> to create a new <code>cluster.yml</code> in the current directory. This command will prompt you for all the information needed to build a cluster. See <a href="/config-options">cluster configuration options</a> for details on the various options.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">rke config --name cluster.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-rke-configuration-options">Other RKE Configuration Options<a class="hash-link" href="#other-rke-configuration-options" title="Direct link to heading">​</a></h4><p>You can create an empty template <code>cluster.yml</code> file by specifying the <code>--empty</code> flag.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">rke config --empty --name cluster.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Instead of creating a file, you can print the generated configuration to stdout using the <code>--print</code> flag.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">rke config --print</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="high-availability">High Availability<a class="hash-link" href="#high-availability" title="Direct link to heading">​</a></h3><p>RKE is HA ready, you can specify more than one <code>controlplane</code> node in the <code>cluster.yml</code> file. RKE will deploy master components on all of these nodes and the kubelets are configured to connect to <code>127.0.0.1:6443</code> by default which is the address of <code>nginx-proxy</code> service that proxy requests to all master nodes.</p><p>To create an HA cluster, specify more than one host with role <code>controlplane</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="certificates">Certificates<a class="hash-link" href="#certificates" title="Direct link to heading">​</a></h3><p><em>Available as of v0.2.0</em></p><p>By default, Kubernetes clusters require certificates and RKE auto-generates the certificates for all cluster components. You can also use <a href="/installation/certs">custom certificates</a>. After the Kubernetes cluster is deployed, you can <a href="/cert-mgmt#certificate-rotation">manage these auto-generated certificates</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-kubernetes-with-rke">Deploying Kubernetes with RKE<a class="hash-link" href="#deploying-kubernetes-with-rke" title="Direct link to heading">​</a></h2><p>After you&#x27;ve created your <code>cluster.yml</code>, you can deploy your cluster with a simple command. This command assumes the <code>cluster.yml</code> file is in the same directory as where you are running the command.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">rke up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">INFO[0000] Building Kubernetes cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">INFO[0000] [dialer] Setup tunnel for host [10.0.0.1]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">INFO[0000] [network] Deploying port listener containers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">INFO[0000] [network] Pulling image [alpine:latest] on host [10.0.0.1]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">INFO[0101] Finished building Kubernetes cluster successfully</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The last line should read <code>Finished building Kubernetes cluster successfully</code> to indicate that your cluster is ready to use. As part of the Kubernetes creation process, a <code>kubeconfig</code> file has been created and written at <code>kube_config_cluster.yml</code>, which can be used to start interacting with your Kubernetes cluster.</p><blockquote><p><strong>Note:</strong> If you have used a different file name from <code>cluster.yml</code>, then the kube config file will be named <code>kube_config_&lt;FILE_NAME&gt;.yml</code>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="save-your-files">Save Your Files<a class="hash-link" href="#save-your-files" title="Direct link to heading">​</a></h2><blockquote><p><strong>Important</strong>
The files mentioned below are needed to maintain, troubleshoot and upgrade your cluster.</p></blockquote><p>Save a copy of the following files in a secure location:</p><ul><li><code>cluster.yml</code>: The RKE cluster configuration file.</li><li><code>kube_config_cluster.yml</code>: The <a href="/kubeconfig">Kubeconfig file</a> for the cluster, this file contains credentials for full access to the cluster.</li><li><code>cluster.rkestate</code>: The <a href="#kubernetes-cluster-state">Kubernetes Cluster State file</a>, this file contains credentials for full access to the cluster.<br><br><em>The Kubernetes Cluster State file is only created when using RKE v0.2.0 or higher.</em></li></ul><blockquote><p><strong>Note:</strong> The &quot;rancher-cluster&quot; parts of the two latter file names are dependent on how you name the RKE cluster configuration file.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-cluster-state">Kubernetes Cluster State<a class="hash-link" href="#kubernetes-cluster-state" title="Direct link to heading">​</a></h3><p>The Kubernetes cluster state, which consists of the cluster configuration file <code>cluster.yml</code> and components certificates in Kubernetes cluster, is saved by RKE, but depending on your RKE version, the cluster state is saved differently.</p><p>As of v0.2.0, RKE creates a <code>.rkestate</code> file in the same directory that has the cluster configuration file <code>cluster.yml</code>. The <code>.rkestate</code> file contains the current state of the cluster including the RKE configuration and the certificates. It is required to keep this file in order to update the cluster or perform any operation on it through RKE.</p><p>Before v0.2.0, RKE saved the Kubernetes cluster state as a secret. When updating the state, RKE pulls the secret, updates/changes the state and saves a new secret.   </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="interacting-with-your-kubernetes-cluster">Interacting with your Kubernetes cluster<a class="hash-link" href="#interacting-with-your-kubernetes-cluster" title="Direct link to heading">​</a></h2><p>After your cluster is up and running, you can start using the <a href="/kubeconfig">generated kubeconfig file</a> to start interacting with your Kubernetes cluster using <code>kubectl</code>.</p><p>After installation, there are several maintenance items that might arise:</p><ul><li><a href="/cert-mgmt">Certificate Management</a></li><li><a href="/managing-clusters">Adding and Removing Nodes in the cluster</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rke1-docs/edit/main/docs/installation/installation.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-03-01T00:15:30.000Z">3/1/2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/os"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Requirements</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/installation/certs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Custom Certificates</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#download-the-rke-binary" class="table-of-contents__link toc-highlight">Download the RKE binary</a><ul><li><a href="#alternative-rke-macos-install---homebrew" class="table-of-contents__link toc-highlight">Alternative RKE macOS Install - Homebrew</a></li><li><a href="#alternative-rke-macos-install---macports" class="table-of-contents__link toc-highlight">Alternative RKE macOS Install - MacPorts</a></li></ul></li><li><a href="#prepare-the-nodes-for-the-kubernetes-cluster" class="table-of-contents__link toc-highlight">Prepare the Nodes for the Kubernetes cluster</a></li><li><a href="#creating-the-cluster-configuration-file" class="table-of-contents__link toc-highlight">Creating the Cluster Configuration File</a><ul><li><a href="#using-rke-config" class="table-of-contents__link toc-highlight">Using <code>rke config</code></a></li><li><a href="#high-availability" class="table-of-contents__link toc-highlight">High Availability</a></li><li><a href="#certificates" class="table-of-contents__link toc-highlight">Certificates</a></li></ul></li><li><a href="#deploying-kubernetes-with-rke" class="table-of-contents__link toc-highlight">Deploying Kubernetes with RKE</a></li><li><a href="#save-your-files" class="table-of-contents__link toc-highlight">Save Your Files</a><ul><li><a href="#kubernetes-cluster-state" class="table-of-contents__link toc-highlight">Kubernetes Cluster State</a></li></ul></li><li><a href="#interacting-with-your-kubernetes-cluster" class="table-of-contents__link toc-highlight">Interacting with your Kubernetes cluster</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2b1e2a92.js"></script>
<script src="/assets/js/main.aa2ef175.js"></script>
</body>
</html>